<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="utf-8">
  
  <title>枫林晚秋</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  
    <meta name="keywords" content="CUI Junlei,CUI Junlei's Blog">
  
  <meta name="description" content="Android TV : Mstar平台 I2C 配置　　芯片的pin 脚可以用作不同的功能，最常用的是作为GPIO，设置为输出模式时，通过高低电平来控制一些外围设置； 　　// 如LED，屏的电源，背光的开关，功放的静音等等。 除了控制设置之外，还需要和外部设置传输数据。　　pin 作为GPIO 设置为IN时，是获取外设的高低来判断外设的状态，最常用的一些source 通道的detect，及一些">
<meta name="keywords" content="日志">
<meta property="og:type" content="article">
<meta property="og:title" content="枫林晚秋">
<meta property="og:url" content="http://makeafree.github.io/2020/05/30/Android TV  Mstar平台 I2C 配置/index.html">
<meta property="og:site_name" content="枫林晚秋">
<meta property="og:description" content="Android TV : Mstar平台 I2C 配置　　芯片的pin 脚可以用作不同的功能，最常用的是作为GPIO，设置为输出模式时，通过高低电平来控制一些外围设置； 　　// 如LED，屏的电源，背光的开关，功放的静音等等。 除了控制设置之外，还需要和外部设置传输数据。　　pin 作为GPIO 设置为IN时，是获取外设的高低来判断外设的状态，最常用的一些source 通道的detect，及一些">
<meta property="og:locale" content="zh-CN">
<meta property="og:image" content="https://common.cnblogs.com/images/copycode.gif">
<meta property="og:image" content="https://common.cnblogs.com/images/copycode.gif">
<meta property="og:image" content="https://img2020.cnblogs.com/blog/821933/202005/821933-20200527221937632-1253389494.png">
<meta property="og:image" content="https://common.cnblogs.com/images/copycode.gif">
<meta property="og:image" content="https://common.cnblogs.com/images/copycode.gif">
<meta property="og:image" content="https://img2020.cnblogs.com/blog/821933/202005/821933-20200527222639367-926484201.png">
<meta property="og:image" content="https://common.cnblogs.com/images/copycode.gif">
<meta property="og:image" content="https://common.cnblogs.com/images/copycode.gif">
<meta property="og:image" content="https://common.cnblogs.com/images/copycode.gif">
<meta property="og:image" content="https://common.cnblogs.com/images/copycode.gif">
<meta property="og:image" content="https://common.cnblogs.com/images/copycode.gif">
<meta property="og:image" content="https://common.cnblogs.com/images/copycode.gif">
<meta property="og:image" content="https://img2020.cnblogs.com/blog/821933/202005/821933-20200527223959768-229822834.png">
<meta property="og:image" content="https://img2020.cnblogs.com/blog/821933/202005/821933-20200527224220551-634096218.png">
<meta property="og:image" content="https://img2020.cnblogs.com/blog/821933/202005/821933-20200527224535292-228108607.png">
<meta property="og:image" content="https://img2020.cnblogs.com/blog/821933/202005/821933-20200527224643029-593239548.png">
<meta property="og:image" content="https://common.cnblogs.com/images/copycode.gif">
<meta property="og:image" content="https://common.cnblogs.com/images/copycode.gif">
<meta property="og:image" content="https://common.cnblogs.com/images/copycode.gif">
<meta property="og:image" content="https://common.cnblogs.com/images/copycode.gif">
<meta property="og:image" content="https://img2020.cnblogs.com/blog/821933/202005/821933-20200527225152661-1262866338.png">
<meta property="og:image" content="https://common.cnblogs.com/images/copycode.gif">
<meta property="og:image" content="https://common.cnblogs.com/images/copycode.gif">
<meta property="og:image" content="https://img2020.cnblogs.com/blog/821933/202005/821933-20200527225257947-1742859594.png">
<meta property="og:image" content="https://common.cnblogs.com/images/copycode.gif">
<meta property="og:image" content="https://common.cnblogs.com/images/copycode.gif">
<meta property="og:image" content="https://common.cnblogs.com/images/copycode.gif">
<meta property="og:image" content="https://common.cnblogs.com/images/copycode.gif">
<meta property="og:image" content="https://common.cnblogs.com/images/copycode.gif">
<meta property="og:image" content="https://common.cnblogs.com/images/copycode.gif">
<meta property="og:updated_time" content="2020-05-30T03:38:28.716Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="枫林晚秋">
<meta name="twitter:description" content="Android TV : Mstar平台 I2C 配置　　芯片的pin 脚可以用作不同的功能，最常用的是作为GPIO，设置为输出模式时，通过高低电平来控制一些外围设置； 　　// 如LED，屏的电源，背光的开关，功放的静音等等。 除了控制设置之外，还需要和外部设置传输数据。　　pin 作为GPIO 设置为IN时，是获取外设的高低来判断外设的状态，最常用的一些source 通道的detect，及一些">
<meta name="twitter:image" content="https://common.cnblogs.com/images/copycode.gif">
  
  
    <link rel="icon" href="/favicon.ico">
  
  <link href="//cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">
  <link rel="stylesheet" href="/css/style.css">
  <script src="/js/pace.min.js"></script>
  

  
  

</head>
</html>
<body>
  <div id="container">
      <header id="header">
    <div id="banner"></div>
    <div id="header-outer">
        <div id="header-menu" class="header-menu-pos animated">
            <div class="header-menu-container">
                <a href="/" class="left">
                    <span class="site-title">CUI Junlei&#39;s Blog</span>
                </a>
                <nav id="header-menu-nav" class="right">
                    
                    <a  href="/">
                        <i class="fa fa-home"></i>
                        <span>Home</span>
                    </a>
                    
                    <a  href="/archives">
                        <i class="fa fa-archive"></i>
                        <span>Archives</span>
                    </a>
                    
                    <a  href="/about">
                        <i class="fa fa-user"></i>
                        <span>About</span>
                    </a>
                    
                </nav>
                <a class="mobile-header-menu-button">
                    <i class="fa fa-bars"></i>
                </a>
            </div>
        </div>
        <div id="header-row">
            <div id="logo">
                <a href="/">
                    <img src="/images/logo.png" alt="logo">
                </a>
            </div>
            <div class="header-info">
                <div id="header-title">
                    
                    <h2>
                        CUI Junlei&#39;s Blog
                    </h2>
                    
                </div>
                <div id="header-description">
                    
                    <h3>
                        一个专注学习开发和记录日志的博客
                    </h3>
                    
                </div>
            </div>
            <nav class="header-nav">
                <div class="social">
                    
                        <a title="MinHow" target="_blank" href="//makeafree.github.io">
                            <i class="fa fa-home fa-2x"></i></a>
                    
                        <a title="Github" target="_blank" href="//github.com/makeafree">
                            <i class="fa fa-github fa-2x"></i></a>
                    
                        <a title="Weibo" target="_blank" href="https://weibo.com/u/5616330228">
                            <i class="fa fa-weibo fa-2x"></i></a>
                    
                        <a title="Twitter"  href="//twitter.com/huangminhow">
                            <i class="fa fa-twitter fa-2x"></i></a>
                    
                </div>
            </nav>
        </div>
    </div>
</header>
      <div class="outer">
        <section id="main" class="body-wrap"><article id="post-Android TV  Mstar平台 I2C 配置" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
    <div class="article-entry post-content" itemprop="articleBody">
      
            
            <h2 id="Android-TV-Mstar平台-I2C-配置"><a href="#Android-TV-Mstar平台-I2C-配置" class="headerlink" title="Android TV : Mstar平台 I2C 配置"></a><a href="https://www.cnblogs.com/blogs-of-lxl/p/12977157.html" target="_blank" rel="noopener">Android TV : Mstar平台 I2C 配置</a></h2><p>　　芯片的pin 脚可以用作不同的功能，最常用的是作为GPIO，设置为输出模式时，通过高低电平来控制一些外围设置；</p>
<p>　　// 如LED，屏的电源，背光的开关，功放的静音等等。 除了控制设置之外，还需要和外部设置传输数据。<br>　　pin 作为GPIO 设置为IN时，是获取外设的高低来判断外设的状态，最常用的一些source 通道的detect，及一些wakeup 功能。<br>　　pin 作为SAR 口，获取ADC值； // 如按键板，参照“mstar平台SAR口使用”<br>　　pin 作为UART / SPI /SD 口；<br>　　pin 作为I2C 口；
　　</p>
<p>　　一般来说，大部分有特殊功能的Pin脚其实都可以作为GPIO使用，当将其配置成特殊功能后，就不能同时配为GPIO。所以当发现某个Pin配成GPIO后，却没办法改变它的高低状态时，就要留意一下该Pin脚是否已经被误配为特殊功能了，这时就需要先DISABLE 掉这个特殊功能之后，才能设置成GPIO及其状态设定。每个chip有对应一个init GPIO配置，BD_MST{$Board}.h, drvpadconf.c</p>
<h2 id="1、标准GPIO口配置"><a href="#1、标准GPIO口配置" class="headerlink" title="1、标准GPIO口配置"></a>1、标准GPIO口配置</h2><p>　　总共有4种状态：</p>
<pre><code>#define GPIO_NONE                   0       // Not GPIO pin (default)
#define GPIO_IN                     1       // GPI
#define GPIO_OUT_LOW                2       // GPO output low
#define GPIO_OUT_HIGH               3       // GPO output high</code></pre><h2 id="2、特殊口配置"><a href="#2、特殊口配置" class="headerlink" title="2、特殊口配置"></a>2、特殊口配置</h2><p><strong>（1）uart 口配置，特殊功能的pin需要在BD_MST{$Board}.h 中配置，如：BD_MST160D_10ABQM_M7221.h</strong></p>
<p><a href="javascript:void(0);" target="_blank" rel="noopener"><img src="https://common.cnblogs.com/images/copycode.gif" alt="复制代码"></a></p>
<pre><code>#define DISABLE                         0
#define ENABLE                          1

#define CONFIG_PADMUX_MODE0                     0x00
#define CONFIG_PADMUX_MODE1                     0x01
#define CONFIG_PADMUX_MODE2                     0x02
#define CONFIG_PADMUX_MODE3                     0x03
#define CONFIG_PADMUX_MODE4                     0x04
#define CONFIG_PADMUX_MODE5                     0x05
#define CONFIG_PADMUX_MODE6                     0x06
#define CONFIG_PADMUX_MODE7                     0x07
#define CONFIG_PADMUX_MODE8                     0x08
#define CONFIG_PADMUX_MODE9                     0x09
#define CONFIG_PADMUX_UNKNOWN                   0xFF</code></pre><p><a href="javascript:void(0);" target="_blank" rel="noopener"><img src="https://common.cnblogs.com/images/copycode.gif" alt="复制代码"></a></p>
<p><img src="https://img2020.cnblogs.com/blog/821933/202005/821933-20200527221937632-1253389494.png" alt="img"></p>
<p>例如UART3，UART4 配置成了CONFIG_PADMUX_MODE1，其实也是ENABLE。</p>
<p>接着在 vendor\mstar\mboot\MBoot\sboot\src*<em>{$Board}*</em>\drvPadConf.c 文件中设置寄存器值：</p>
<p><a href="javascript:void(0);" target="_blank" rel="noopener"><img src="https://common.cnblogs.com/images/copycode.gif" alt="复制代码"></a></p>
<pre><code>#ifdef PADS_UART3_MODE
    #if (PADS_UART3_MODE != CONFIG_PADMUX_UNKNOWN)
    #define _CONFIG_UART3_MODE  ((PADS_UART3_MODE == CONFIG_PADMUX_MODE1) ? BIT2 : \
                                 (PADS_UART3_MODE == CONFIG_PADMUX_MODE2) ? BIT3 : \
                                 (PADS_UART3_MODE == CONFIG_PADMUX_MODE3) ? (BIT3 | BIT2) : 0)
        _RVM1(0x1e05, _CONFIG_UART3_MODE, (BIT3 | BIT2)),
    #endif
#endif

#ifdef PADS_UART4_MODE
    #if (PADS_UART4_MODE != CONFIG_PADMUX_UNKNOWN)
    #define _CONFIG_UART4_MODE  ((PADS_UART4_MODE == CONFIG_PADMUX_MODE1) ? BIT6 : \
                                 (PADS_UART4_MODE == CONFIG_PADMUX_MODE2) ? BIT7 : \
                                 (PADS_UART4_MODE == CONFIG_PADMUX_MODE3) ? (BIT7 | BIT6) : 0)
        _RVM1(0x1e04, _CONFIG_UART4_MODE, (BIT7 | BIT6)),
    #endif
#endif</code></pre><p><a href="javascript:void(0);" target="_blank" rel="noopener"><img src="https://common.cnblogs.com/images/copycode.gif" alt="复制代码"></a></p>
<p>针对UART3，UART4 设置了寄存器0x1e05 的bit2，0x1e04的bit6 。这样就配置完成了。</p>
<p><strong>（2）I2C 总线功能配置</strong></p>
<p>　　以I2C2 为例</p>
<p><img src="https://img2020.cnblogs.com/blog/821933/202005/821933-20200527222639367-926484201.png" alt="img"></p>
<p>　　I2C 的clk，data 脚分别连接在AD16，AC16 两个pin 上面。比较特殊的是这两个pin 都是有复用功能的。所以需要disable掉其特殊功能LED/tcon。</p>
<p>　　在BD_MST160D_AH_M7221.h中可以关闭LED功能：</p>
<pre><code>#define PADS_LED_MODE              DISABLE</code></pre><p>　　Tcon[11],Tcon[12], 未找到，属于备用的暂不处理　　</p>
<p>　　寄存器设置</p>
<p><a href="javascript:void(0);" target="_blank" rel="noopener"><img src="https://common.cnblogs.com/images/copycode.gif" alt="复制代码"></a></p>
<pre><code>#ifdef PADS_LED_MODE
    #if (PADS_LED_MODE != CONFIG_PADMUX_UNKNOWN)
    #define _CONFIG_LED_MODE    ((PADS_LED_MODE == ENABLE) ? BIT4 : 0)
        _RVM1(0x1eb4, _CONFIG_LED_MODE, BIT4),

    #if (PADS_LED_MODE == DISABLE)
        _MEMMAP_PM_,
        //reg_seperate_wol_led_is_gpio
        _RVM1(0x0e39, BIT7, BIT7),
        //reg_led_is_gpio
        _RVM1(0x0e39, 0, BIT0),
        _MEMMAP_nonPM_,
    #endif
    #endif
#endif</code></pre><p><a href="javascript:void(0);" target="_blank" rel="noopener"><img src="https://common.cnblogs.com/images/copycode.gif" alt="复制代码"></a></p>
<p>　　disable 掉特殊功能之后，开始配置I2C 功能</p>
<p><a href="javascript:void(0);" target="_blank" rel="noopener"><img src="https://common.cnblogs.com/images/copycode.gif" alt="复制代码"></a></p>
<pre><code>//SWI2C
#define PAD_DDCR_CK_IS_GPIO                     GPIO_IN                 //I2C-SCL (EEPROM)
#define PAD_DDCR_DA_IS_GPIO                     GPIO_IN                 //I2CM-SDA (EEPROM)

#define PAD_TGPIO0_IS_GPIO                      GPIO_IN                 //TUNER_SCL
#define PAD_TGPIO1_IS_GPIO                      GPIO_IN                 //TUNER_SDA

#define PAD_GPIO19_IS_GPIO                      GPIO_IN                 //I2C2-SCL
#define PAD_GPIO20_IS_GPIO                      GPIO_IN                 //I2C2-SDA*</code></pre><p><a href="javascript:void(0);" target="_blank" rel="noopener"><img src="https://common.cnblogs.com/images/copycode.gif" alt="复制代码"></a></p>
<p>　　将GPIO19，GPIO20 配置成了GPIO_IN，接着进行寄存器配置。如下：</p>
<p><a href="javascript:void(0);" target="_blank" rel="noopener"><img src="https://common.cnblogs.com/images/copycode.gif" alt="复制代码"></a></p>
<pre><code>    #if(PAD_GPIO19_IS_GPIO != GPIO_NONE)
        #define PAD_GPIO19_OEN (PAD_GPIO19_IS_GPIO == GPIO_IN ? BIT1: 0)
        #define PAD_GPIO19_OUT (PAD_GPIO19_IS_GPIO == GPIO_OUT_HIGH ? BIT0: 0)
        _RVM1(0x2b08, PAD_GPIO19_OUT, BIT0),
        _RVM1(0x2b08, PAD_GPIO19_OEN, BIT1),
        //reg_tconconfig11
        _RVM1(0x1ea1, 0, BIT3),   //reg[101ea1]#3 = 0b
        //reg_agc_dbg
        _RVM1(0x1e9e, 0, BIT7),   //reg[101e9e]#7 = 0b
        //reg_led_mode
        _RVM1(0x1eb4, 0, BIT4),   //reg[101eb4]#4 = 0b
        //reg_seconduartmode
        _RVM1(0x1e05, 0, BIT1 | BIT0),   //reg[101e05]#1 ~ #0 = 00b
        //reg_od2nduart
        _RVM1(0x1ea9, 0, BIT1 | BIT0),   //reg[101ea9]#1 ~ #0 = 00b
        //reg_miic_mode0
        _RVM1(0x1edc, 0, BIT0),   //reg[101edc]#0 = 0b
    #endif

    #if(PAD_GPIO20_IS_GPIO != GPIO_NONE)
        #define PAD_GPIO20_OEN (PAD_GPIO20_IS_GPIO == GPIO_IN ? BIT1: 0)
        #define PAD_GPIO20_OUT (PAD_GPIO20_IS_GPIO == GPIO_OUT_HIGH ? BIT0: 0)
        _RVM1(0x2b09, PAD_GPIO20_OUT, BIT0),
        _RVM1(0x2b09, PAD_GPIO20_OEN, BIT1),
        //reg_tconconfig12
        _RVM1(0x1ea1, 0, BIT4),   //reg[101ea1]#4 = 0b
        //reg_agc_dbg
        _RVM1(0x1e9e, 0, BIT7),   //reg[101e9e]#7 = 0b
        //reg_led_mode
        _RVM1(0x1eb4, 0, BIT4),   //reg[101eb4]#4 = 0b
        //reg_seconduartmode
        _RVM1(0x1e05, 0, BIT1 | BIT0),   //reg[101e05]#1 ~ #0 = 00b
        //reg_od2nduart
        _RVM1(0x1ea9, 0, BIT1 | BIT0),   //reg[101ea9]#1 ~ #0 = 00b
        //reg_vx1gpi_mode
        _RVM1(0x1e4a, 0, BIT1 | BIT0),   //reg[101e4a]#1 ~ #0 = 00b
        //reg_miic_mode0
        _RVM1(0x1edc, 0, BIT0),   //reg[101edc]#0 = 0b
        //reg_extint5
        _RVM1(0x1ea5, 0, BIT5),   //reg[101ea5]#5 = 0b
    #endif</code></pre><p><a href="javascript:void(0);" target="_blank" rel="noopener"><img src="https://common.cnblogs.com/images/copycode.gif" alt="复制代码"></a></p>
<p>　　其实配置成GPIO_IN 容易和 标准GPIO IN 模式产生误解。应该区别一下定义成IIC_MODE等其他宏，然后drvpadconf.c 文件中，设置寄存器即可。</p>
<p>　　寄存器值的设置才是pin 的功能设置的本质，这样就完成mboot里面pin的功能定义。</p>
<h2 id="3、使用实例-移植TCA9539"><a href="#3、使用实例-移植TCA9539" class="headerlink" title="3、使用实例 - 移植TCA9539"></a>3、使用实例 - 移植TCA9539</h2><p>　　tca959 作为一款纯IIC控制的mcu，上电后即可通过主控IC的 I2C 来控制mcu 的管脚，设置这些pin的input / output 模式，以及获取output的高低，另外也可以获取input的状态。通常主控IC的IO口不够用时用来扩展IO口。</p>
<p><strong>(1)TCA9539 I2C地址确定</strong></p>
<p>　　查看TCA9539 的datasheet 文档，地址部分，总共有7位，其中Slave address 的bit 位固定，另外最后两个bits 位根据原理图中地址pin 的高低来判断</p>
<p>　<img src="https://img2020.cnblogs.com/blog/821933/202005/821933-20200527223959768-229822834.png" alt="img"></p>
<p>　　查看原理图发现，tca9539 的I2C地址脚IIC_SEL0，IIC_SEL1 接的是下拉电阻，两个PIN都是低电平，故地址应该取0x74. </p>
<p><img src="https://img2020.cnblogs.com/blog/821933/202005/821933-20200527224220551-634096218.png" alt="img"></p>
<p> 　结合原理图和datasheet 得到一个7bit 的I2C地址后，需要左移(x2), 末尾补零生成一个8bit 的地址（包含读写位）给软件使用，计算后该地址为 0xE8.</p>
<p><strong>(2)TCA9539 I2C地址配置</strong></p>
<p>　　找到对应板型的board.h 文件，配置tca9539 IIC 信息。包含在那一组IIC及设备的IIC 地址。其中TCA9539_I2C_ID 只是一个枚举值方便应用调用。</p>
<p>　　<img src="https://img2020.cnblogs.com/blog/821933/202005/821933-20200527224535292-228108607.png" alt="img"></p>
<p> <strong>(3)管脚功能配置</strong></p>
<p>　　功能配置主要是配置对应pin的输入，输出模式及输出模式的高低状态</p>
<p><img src="https://img2020.cnblogs.com/blog/821933/202005/821933-20200527224643029-593239548.png" alt="img"></p>
<p>　　根据datasheet 的说明，寄存器0x06 , 0x07 分别配置port 0~ 7 ，port 10~17对应bit位为1 则为输入 为0 则为输出。 而寄存器0x04, 0x05 分别是设置port 0 ~ 7，port 10 ~ 17 的极性。<br>　　例如：设置P3，P4，P5，P7，P10，P11 需要设置为output，其它为input模式：</p>
<p><a href="javascript:void(0);" target="_blank" rel="noopener"><img src="https://common.cnblogs.com/images/copycode.gif" alt="复制代码"></a></p>
<pre><code>#define  TCA9539_MASK_P0  (1 &lt;&lt; 0)
#define  TCA9539_MASK_P1  (1 &lt;&lt; 1)
#define  TCA9539_MASK_P2  (1 &lt;&lt; 2)
#define  TCA9539_MASK_P3  (1 &lt;&lt; 3)
#define  TCA9539_MASK_P4  (1 &lt;&lt; 4)
#define  TCA9539_MASK_P5  (1 &lt;&lt; 5)
#define  TCA9539_MASK_P6  (1 &lt;&lt; 6)
#define  TCA9539_MASK_P7  (1 &lt;&lt; 7)

// P3,P4,P5,P7 set to output  0x47
static MAPI_U8 uTca9539_Ports_L_Mode = 0xFF  &amp; \
                        (~(TCA9539_MASK_P3)) &amp; \
                        (~(TCA9539_MASK_P4)) &amp; \
                        (~(TCA9539_MASK_P5)) &amp; \
                        (~(TCA9539_MASK_P7));

// P10,P11 set to output  0xFC
static MAPI_U8 uTca9539_Ports_H_Mode = (0xFF  &amp; (~(TCA9539_MASK_P0)) &amp; (~(TCA9539_MASK_P1)));</code></pre><p><a href="javascript:void(0);" target="_blank" rel="noopener"><img src="https://common.cnblogs.com/images/copycode.gif" alt="复制代码"></a></p>
<p>　　定义寄存器0x06 需要初始化的值0x47 (0100 0111), 二进制从右到左 bit0~bit7 对应port0 ~ port7；寄存器 0x07，需要初始化的值0xFC (1111 1100) ，二进制从右到左bit0 ~ bit7 对应port10 ~ port17.</p>
<p><a href="javascript:void(0);" target="_blank" rel="noopener"><img src="https://common.cnblogs.com/images/copycode.gif" alt="复制代码"></a></p>
<pre><code>    MAPI_U8  uCfgLowPorts    = 0x06;
    MAPI_U8  uCfgHighPorts   = 0x07;
    iptr = mapi_i2c::GetI2C_Dev(TCA9539_I2C_ID);
    if(iptr == NULL)
    {
        printf("[%s][%d] Invalid I2c mcu addr .\n",__FUNCTION__,__LINE__);
        return MAPI_FALSE;
    }

    // config the port mode &lt;input or output&gt;
    if(MAPI_FALSE == iptr-&gt;WriteBytes(1,&amp;uCfgLowPorts,1,&amp;uTca9539_Ports_L_Mode))
    {
        printf("[%s][%d] wirte the port 0~7 failed.\n",__FUNCTION__,__LINE__);
        return MAPI_FALSE;
    }
    if(MAPI_FALSE == iptr-&gt;WriteBytes(1,&amp;uCfgHighPorts,1,&amp;uTca9539_Ports_H_Mode))
    {
        printf("[%s][%d] wirte the port 10~17 failed.\n",__FUNCTION__,__LINE__);
        return MAPI_FALSE;
    }</code></pre><p><a href="javascript:void(0);" target="_blank" rel="noopener"><img src="https://common.cnblogs.com/images/copycode.gif" alt="复制代码"></a></p>
<p>　　这样就完成input ， output 模式的配置。</p>
<p><strong>(4)读取输出管脚状态</strong></p>
<h2 id=""><a href="#" class="headerlink" title="　"></a>　<img src="https://img2020.cnblogs.com/blog/821933/202005/821933-20200527225152661-1262866338.png" alt="img"></h2><p>　　通过datasheet得到，寄存器0x00,0x01 是用来获取port 的状态：</p>
<p><a href="javascript:void(0);" target="_blank" rel="noopener"><img src="https://common.cnblogs.com/images/copycode.gif" alt="复制代码"></a></p>
<pre><code>    MAPI_U8  uLowRegAddr  = 0x00;
    MAPI_U8  uHighRegAddr = 0x01;

    MAPI_U8  uOldData     = 0x00;
    MAPI_U8  uData        = 0x00;
    MAPI_U8  uMask        = 0x00;

    MAPI_U8  uRRegAddr     = (port &gt; TCA9539_P7) ? uHighRegAddr : uLowRegAddr;

    iptr = mapi_i2c::GetI2C_Dev(TCA9539_I2C_ID);
    if(iptr == NULL)
    {
        printf("[%s][%d] Invalid I2c mcu addr .\n",__FUNCTION__,__LINE__);
        return MAPI_FALSE;
    }

    // 获取port 口该组的所有状态
    if(MAPI_FALSE == iptr-&gt;ReadBytes(1, &amp;uRRegAddr, 1, &amp;uOldData))
    {
        printf("[%s][%d] get the port status failed .\n",__FUNCTION__,__LINE__);
        return MAPI_FALSE;
    }
    // 计算返回对应port 口的状态
    return    (uData &gt;&gt; (port % 10) | 0x01)；</code></pre><p><a href="javascript:void(0);" target="_blank" rel="noopener"><img src="https://common.cnblogs.com/images/copycode.gif" alt="复制代码"></a></p>
<p><strong>(5)设置输出管脚状态</strong></p>
<p>　<strong><img src="https://img2020.cnblogs.com/blog/821933/202005/821933-20200527225257947-1742859594.png" alt="img"></strong></p>
<p> 　</p>
<p>　　通过datasheet可知，输出管脚的状态，通过寄存器0x2,0x03 来设置：</p>
<p><a href="javascript:void(0);" target="_blank" rel="noopener"><img src="https://common.cnblogs.com/images/copycode.gif" alt="复制代码"></a></p>
<pre><code>MAPI_BOOL device_mcu_tca9539::Set_port_Output(MAPI_U8 port, MAPI_BOOL bOutState)
{
    mapi_i2c *iptr      = NULL;
    // for output status
    MAPI_U8  uLowRegAddr  = 0x00;
    MAPI_U8  uHighRegAddr = 0x01;

    MAPI_U8  uLowWReg     = 0x02;
    MAPI_U8  uHighWReg    = 0x03;

    MAPI_U8  uOldData     = 0x00;
    MAPI_U8  uData        = 0x00;
    MAPI_U8  uMask        = 0x00;

    MAPI_U8  uRRegAddr     = (port &gt; TCA9539_P7) ? uHighRegAddr : uLowRegAddr;
    MAPI_U8  uWRegAddr     = (port &gt; TCA9539_P7) ? uHighWReg : uLowWReg;

    iptr = mapi_i2c::GetI2C_Dev(TCA9539_I2C_ID);
    if(iptr == NULL)
    {
        printf("[%s][%d] Invalid I2c mcu addr .\n",__FUNCTION__,__LINE__);
        return MAPI_FALSE;
    }

    // 通过寄存器0x00（port0 ~ port7）/0x01（port10 ~ port17）读取当前port口的状态
    if(MAPI_FALSE == iptr-&gt;ReadBytes(1, &amp;uRRegAddr, 1, &amp;uOldData))
    {
        printf("[%s][%d] get the port status failed .\n",__FUNCTION__,__LINE__);
        return MAPI_FALSE;
    }

    // 计算，并设置port 的新状态，其它port 状态不变
    uMask = 1 &lt;&lt; (port % 10);
    // set the new status
    if(bOutState){
        uData = (uMask | uOldData);  // set H
    } else {
        uData = (~uMask) &amp; uOldData;  // set L
    }

    //  对寄存器0x02（port0 ~ port7）/0x03（port10 ~ port17）写输出的高低状态
    if(MAPI_FALSE == iptr-&gt;WriteBytes(1, &amp;uWRegAddr, 1, &amp;uData))
    {
        printf("[%s][%d] set the new status failed .\n",__FUNCTION__,__LINE__);
        return MAPI_FALSE;
    }

    printf("[%s][%d] set the P%02d to  %d.\n",__FUNCTION__,__LINE__,port,bOutState);

    return MAPI_TRUE;
}</code></pre><p><a href="javascript:void(0);" target="_blank" rel="noopener"><img src="https://common.cnblogs.com/images/copycode.gif" alt="复制代码"></a></p>
<p><strong>完整驱动代码　：</strong></p>
<p>　　device_mcu_tca9539.h:</p>
<p><a href="javascript:void(0);" target="_blank" rel="noopener"><img src="https://common.cnblogs.com/images/copycode.gif" alt="复制代码"></a></p>
<pre><code>#ifndef __DEVIDE_MCU_TCA9539_H__
#define __DEVIDE_MCU_TCA9539_H__

/*@ &lt;Include&gt; @*/
#include "mapi_mcu.h"
#include "MsTypes.h"
#include "MTypes.h"
/*@ &lt;/Include&gt; @*/

#define  PORT_INPUT     (1)
#define  PORT_OUTPUT    (0)

#define  OUTPUT_H       (1)
#define  OUTPUT_L       (0)

#define  TCA9539_P0     (0)
#define  TCA9539_P1     (1)
#define  TCA9539_P2     (2)
#define  TCA9539_P3     (3)
#define  TCA9539_P4     (4)
#define  TCA9539_P5     (5)
#define  TCA9539_P6     (6)
#define  TCA9539_P7     (7)

#define  TCA9539_P10     (10)
#define  TCA9539_P11     (11)
#define  TCA9539_P12     (12)
#define  TCA9539_P13     (13)
#define  TCA9539_P14     (14)
#define  TCA9539_P15     (16)
#define  TCA9539_P16     (15)
#define  TCA9539_P17     (17)

#define  TCA9539_MASK_P0  (1 &lt;&lt; 0)
#define  TCA9539_MASK_P1  (1 &lt;&lt; 1)
#define  TCA9539_MASK_P2  (1 &lt;&lt; 2)
#define  TCA9539_MASK_P3  (1 &lt;&lt; 3)
#define  TCA9539_MASK_P4  (1 &lt;&lt; 4)
#define  TCA9539_MASK_P5  (1 &lt;&lt; 5)
#define  TCA9539_MASK_P6  (1 &lt;&lt; 6)
#define  TCA9539_MASK_P7  (1 &lt;&lt; 7)

class device_mcu_tca9539 : public mapi_mcu
{
public:
    DLL_PUBLIC device_mcu_tca9539(void);
    DLL_PUBLIC ~device_mcu_tca9539(void);
    DLL_PUBLIC MAPI_BOOL Init(void);
    DLL_PUBLIC MAPI_BOOL Finalize(void);
    DLL_PUBLIC MAPI_BOOL Reset(void);
    DLL_PUBLIC MAPI_BOOL Set_port_mode(MAPI_U8 port, MAPI_BOOL bInput);
    DLL_PUBLIC MAPI_BOOL Get_port_mode(MAPI_U8 port, MAPI_U8 *uMode);
    DLL_PUBLIC MAPI_BOOL Set_port_Output(MAPI_U8 port, MAPI_BOOL bOutState);
    DLL_PUBLIC MAPI_BOOL Get_port_State(MAPI_U8 port, MAPI_BOOL *bMode, MAPI_BOOL *bState);
    DLL_PUBLIC MAPI_BOOL Tca9539Setup(void);
};
#endif // __DEVIDE_LED_DEFAULT_H__</code></pre><p><a href="javascript:void(0);" target="_blank" rel="noopener"><img src="https://common.cnblogs.com/images/copycode.gif" alt="复制代码"></a></p>
<p>　　device_mcu_tca9539.cpp:</p>
<p><a href="javascript:void(0);" target="_blank" rel="noopener"><img src="https://common.cnblogs.com/images/copycode.gif" alt="复制代码"></a></p>
<pre><code>#include &lt;sys/stat.h&gt;
#include &lt;unistd.h&gt;
#include &lt;cstring&gt;

#include "MsCommon.h"
#include "MsOS.h"
#include &lt;dirent.h&gt;

// #include "mapi_gpio.h"
#include "mapi_i2c.h"
#include "mapi_i2c_devTable.h"
#include "mapi_gpio_devTable.h"
#include "device_mcu_tca9539.h"
#include "MSrv_Control_common.h"

// P3,P4,P5,P7 set to output  0x47
static MAPI_U8 uTca9539_Ports_L_Mode = 0xFF  &amp; \
                        (~(TCA9539_MASK_P3)) &amp; \
                        (~(TCA9539_MASK_P4)) &amp; \
                        (~(TCA9539_MASK_P5)) &amp; \
                        (~(TCA9539_MASK_P7));


// P10,P11 set to output  0xFC
static MAPI_U8 uTca9539_Ports_H_Mode = (0xFF  &amp; (~(TCA9539_MASK_P0)) &amp; (~(TCA9539_MASK_P1)));

device_mcu_tca9539::device_mcu_tca9539(void)
{   
}

device_mcu_tca9539::~device_mcu_tca9539(void)
{
}

MAPI_BOOL device_mcu_tca9539::Init(void)
{
    return Reset();
}

MAPI_BOOL device_mcu_tca9539::Finalize(void)
{
    BOOL bRet = FALSE;
    printf("Finalize TCA9539\n");

    bRet = MSrv_Control_common::SetGpioDeviceStatus(MCU_RESET,FALSE);

    return (bRet) ? MAPI_TRUE : MAPI_FALSE;
}

MAPI_BOOL device_mcu_tca9539::Reset(void)
{
    BOOL bRet1 = FALSE;
    BOOL bRet2 = FALSE;
    printf("Reset TCA9539\n");

    bRet1 = MSrv_Control_common::SetGpioDeviceStatus(MCU_RESET,FALSE);
    usleep(100*1000); // 100ms
    bRet2 = MSrv_Control_common::SetGpioDeviceStatus(MCU_RESET,TRUE);

    Tca9539Setup();

    return (bRet1 &amp;&amp; bRet2) ? MAPI_TRUE : MAPI_FALSE;
}

MAPI_BOOL device_mcu_tca9539::doHandleOps(void)
{
    MAPI_BOOL    bMode      = FALSE;
    MAPI_BOOL    bPlugState = TRUE;   // plug out: ops H  ; plug in : ops L
    MAPI_BOOL    bState     = TRUE;   // ops status. H: off; L: on
    // OPS Det
    Get_port_State(TCA9539_P6, &amp;bMode, &amp;bPlugState);
    // OPS power
    Get_port_State(TCA9539_P17, &amp;bMode, &amp;bState);
    if((!bPlugState)&amp;&amp;(bState)){
        // // set ops on
        // uData = 0x7F; // P3 = H ,P7 = L
        // if(MAPI_FALSE == iptr-&gt;WriteBytes(1,&amp;uLowRegAddr,1,&amp;uData))
        // {
        //     printf("[%s][%d] wirte the port 10~17 failed.\n",__FUNCTION__,__LINE__);
        //     return MAPI_FALSE;
        // }

        // usleep(100*1000);

        // uData = 0xFF; // P3 = H ,P7 = H
        // if(MAPI_FALSE == iptr-&gt;WriteBytes(1,&amp;uLowRegAddr,1,&amp;uData))
        // {
        //     printf("[%s][%d] wirte the port 10~17 failed.\n",__FUNCTION__,__LINE__);
        //     return MAPI_FALSE;
        // }
        Set_port_Output(TCA9539_P7,MAPI_FALSE);  //  to L

        usleep(100*1000);

        Set_port_Output(TCA9539_P7,MAPI_TRUE);   //  to  H 

        printf("[%s][%d] start the ops .\n",__FUNCTION__,__LINE__);

        return TRUE;
    }
    return FALSE;
}

MAPI_BOOL device_mcu_tca9539::Tca9539Setup(void)
{
    mapi_i2c *iptr        = NULL;
    MAPI_U8  uCfgLowPorts    = 0x06;
    MAPI_U8  uCfgHighPorts   = 0x07;
    // for output status
    MAPI_U8  uLowRegAddr  = 0x02;
    MAPI_U8  uHighRegAddr = 0x03;
    MAPI_U8  uData        = 0x00;

    printf("[%s][%d] Enter .\n",__FUNCTION__,__LINE__);

    iptr = mapi_i2c::GetI2C_Dev(TCA9539_I2C_ID);
    if(iptr == NULL)
    {
        printf("[%s][%d] Invalid I2c mcu addr .\n",__FUNCTION__,__LINE__);
        return MAPI_FALSE;
    }

    // config the port mode &lt;input or output&gt;
    if(MAPI_FALSE == iptr-&gt;WriteBytes(1,&amp;uCfgLowPorts,1,&amp;uTca9539_Ports_L_Mode))
    {
        printf("[%s][%d] wirte the port 0~7 failed.\n",__FUNCTION__,__LINE__);
        return MAPI_FALSE;
    }
    if(MAPI_FALSE == iptr-&gt;WriteBytes(1,&amp;uCfgHighPorts,1,&amp;uTca9539_Ports_H_Mode))
    {
        printf("[%s][%d] wirte the port 10~17 failed.\n",__FUNCTION__,__LINE__);
        return MAPI_FALSE;
    }

    // config: set port(output) status
    uData = 0xF7; //  P3 = L  , other bit was seted to H
    if(MAPI_FALSE == iptr-&gt;WriteBytes(1,&amp;uLowRegAddr,1,&amp;uData))
    {
        printf("[%s][%d] wirte the port 0~7 failed.\n",__FUNCTION__,__LINE__);
        return MAPI_FALSE;    
    }

    // set touch power
    uData = 0xFC; //  P10, P11 = L  , other bit was seted to H
    if(MAPI_FALSE == iptr-&gt;WriteBytes(1,&amp;uHighRegAddr,1,&amp;uData))
    {
        printf("[%s][%d] wirte the port 0~7 failed.\n",__FUNCTION__,__LINE__);
        return MAPI_FALSE;
    }

    doHandleOps();

    #if 0
    // set ops on
    uData = 0x7F; // P3 = H ,P7 = L
    if(MAPI_FALSE == iptr-&gt;WriteBytes(1,&amp;uLowRegAddr,1,&amp;uData))
    {
        printf("[%s][%d] wirte the port 10~17 failed.\n",__FUNCTION__,__LINE__);
        return MAPI_FALSE;
    }

    usleep(100*1000);

    uData = 0xFF; // P3 = H ,P7 = H
    if(MAPI_FALSE == iptr-&gt;WriteBytes(1,&amp;uLowRegAddr,1,&amp;uData))
    {
        printf("[%s][%d] wirte the port 10~17 failed.\n",__FUNCTION__,__LINE__);
        return MAPI_FALSE;
    }
    #endif

    #if 0
    // config the S_USB_SEL
    // uData = 0xFE; // P10 = L   android source
    uData = 0xFF; // P10 = H   OPS source
    if(MAPI_FALSE == iptr-&gt;WriteBytes(1,&amp;uHighRegAddr,1,&amp;uData))
    {
        printf("[%s][%d] wirte the port 10~17 failed.\n",__FUNCTION__,__LINE__);
        return MAPI_FALSE;
    }
    #endif
    printf("[%s][%d] setup success.\n",__FUNCTION__,__LINE__);

    return MAPI_TRUE;
}

// bInput:  TRUE --&gt; input , FALSE  --&gt; output
MAPI_BOOL device_mcu_tca9539::Set_port_mode(MAPI_U8 port, MAPI_BOOL bInput)
{
    printf("[%s][%d] Enter .\n",__FUNCTION__,__LINE__);
    return MAPI_TRUE;
}

// uMode:  1 --&gt; input, 0 --&gt; output
MAPI_BOOL device_mcu_tca9539::Get_port_mode(MAPI_U8 port, MAPI_U8 *uMode)
{
    printf("[%s][%d] Enter .\n",__FUNCTION__,__LINE__);
    return MAPI_TRUE;
}

MAPI_BOOL device_mcu_tca9539::Set_port_Output(MAPI_U8 port, MAPI_BOOL bOutState)
{
    mapi_i2c *iptr      = NULL;
    // for output status
    MAPI_U8  uLowRegAddr  = 0x00;
    MAPI_U8  uHighRegAddr = 0x01;

    MAPI_U8  uLowWReg     = 0x02;
    MAPI_U8  uHighWReg    = 0x03;

    MAPI_U8  uOldData     = 0x00;
    MAPI_U8  uData        = 0x00;
    MAPI_U8  uMask        = 0x00;

    MAPI_U8  uRRegAddr     = (port &gt; TCA9539_P7) ? uHighRegAddr : uLowRegAddr;
    MAPI_U8  uWRegAddr     = (port &gt; TCA9539_P7) ? uHighWReg : uLowWReg;

    iptr = mapi_i2c::GetI2C_Dev(TCA9539_I2C_ID);
    if(iptr == NULL)
    {
        printf("[%s][%d] Invalid I2c mcu addr .\n",__FUNCTION__,__LINE__);
        return MAPI_FALSE;
    }

    // get the old status 
    if(MAPI_FALSE == iptr-&gt;ReadBytes(1, &amp;uRRegAddr, 1, &amp;uOldData))
    {
        printf("[%s][%d] get the port status failed .\n",__FUNCTION__,__LINE__);
        return MAPI_FALSE;
    }

    uMask = 1 &lt;&lt; (port % 10);
    // set the new status
    if(bOutState){
        uData = (uMask | uOldData);  // set H
    } else {
        uData = (~uMask) &amp; uOldData;  // set L
    }

    if(MAPI_FALSE == iptr-&gt;WriteBytes(1, &amp;uWRegAddr, 1, &amp;uData))
    {
        printf("[%s][%d] set the new status failed .\n",__FUNCTION__,__LINE__);
        return MAPI_FALSE;
    }

    printf("[%s][%d] set the P%02d to  %d.\n",__FUNCTION__,__LINE__,port,bOutState);

    return MAPI_TRUE;
}

MAPI_BOOL device_mcu_tca9539::Get_port_State(MAPI_U8 port, MAPI_BOOL *bMode, MAPI_BOOL *bState)
{
    mapi_i2c *iptr      = NULL;
    // used for port status
    MAPI_U8  uInLowRegAddr  = 0x00;
    MAPI_U8  uInHighRegAddr = 0x01;
    MAPI_U8  uRegAddr  = (port &gt; TCA9539_P7) ? uInHighRegAddr : uInLowRegAddr;

    // for port mode
    MAPI_U8  uLowPorts    = 0x06;
    MAPI_U8  uHighPorts   = 0x07;
    MAPI_U8  uModeRegAddr = (port &gt; TCA9539_P7) ? uHighPorts : uLowPorts;
    MAPI_U8  uData        = 0x00;
    MAPI_U8  uMode        = 0x00;

    if(NULL == bMode || NULL == bState || (port &gt; TCA9539_P17 || port &lt; TCA9539_P0))
    {
        printf("[%s][%d] param error .\n",__FUNCTION__,__LINE__);    
        return MAPI_FALSE;
    }

    iptr = mapi_i2c::GetI2C_Dev(TCA9539_I2C_ID);
    if(iptr == NULL)
    {
        printf("[%s][%d] Invalid I2c mcu addr .\n",__FUNCTION__,__LINE__);
        return MAPI_FALSE;
    }

    // get the port mode &lt;input/outputO&gt; 
    if(MAPI_FALSE == iptr-&gt;ReadBytes(1, &amp;uModeRegAddr, 1, &amp;uData))
    {
        printf("[%s][%d] get the old status failed .\n",__FUNCTION__,__LINE__);
        return MAPI_FALSE;
    }

    uMode = (uData &gt;&gt; (port % 10)) &amp; 0x01;
    *bMode = uMode;

    uData = 0x00;
    if(MAPI_FALSE == iptr-&gt;ReadBytes(1, &amp;uRegAddr, 1, &amp;uData))
    {
        printf("[%s][%d] get the port status failed .\n",__FUNCTION__,__LINE__);
        return MAPI_FALSE;
    }

    printf("[%s][%d] uRegAddr [0x%02x] , uData [0x%02x] \n", __FUNCTION__,__LINE__, uRegAddr, uData);

    *bState = (uData &gt;&gt; (port % 10) &amp; 0x01);

    printf("[%s][%d] P%02d mode &lt;%s&gt; , state [%d] \n", __FUNCTION__,__LINE__, port, (bMode ? "Input":"Output"), *bState);
    return MAPI_TRUE;
}</code></pre><p><a href="javascript:void(0);" target="_blank" rel="noopener"><img src="https://common.cnblogs.com/images/copycode.gif" alt="复制代码"></a></p>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>
            <div class="post-copyright">
    <div class="content">
        <p>最后更新： 2020年05月30日 11:38</p>
        <p>原始链接： <a class="post-url" href="/2020/05/30/Android TV  Mstar平台 I2C 配置/" title="">http://makeafree.github.io/2020/05/30/Android TV  Mstar平台 I2C 配置/</a></p>
        <footer>
            <a href="http://makeafree.github.io">
                <img src="/images/logo.png" alt="cuijunlei">
                cuijunlei
            </a>
        </footer>
    </div>
</div>

      
        
            
<div class="page-reward">
    <a id="rewardBtn" href="javascript:;">赏</a>
</div>

<div id="reward" class="post-modal reward-lay">
    <a class="close" href="javascript:;" id="reward-close">×</a>
    <span class="reward-title">
        <i class="icon icon-quote-left"></i>
        请我吃糖~
        <i class="icon icon-quote-right"></i>
    </span>
    <div class="reward-content">
        
        <div class="reward-code">
            <img id="rewardCode" src="/" alt="打赏二维码">
        </div>
        <div class="reward-select">
            
            
        </div>
    </div>
</div>


        
    </div>
    <footer class="article-footer">
        
        
<div class="post-share">
    <a href="javascript:;" id="share-sub" class="post-share-fab">
        <i class="fa fa-share-alt"></i>
    </a>
    <div class="post-share-list" id="share-list">
        <ul class="share-icons">
          <li>
            <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=http://makeafree.github.io/2020/05/30/Android TV  Mstar平台 I2C 配置/&title=枫林晚秋&pic=http://makeafree.github.ioimages/logo.png" data-title="微博">
              <i class="fa fa-weibo"></i>
            </a>
          </li>
          <li>
            <a class="weixin share-sns" id="wxFab" href="javascript:;" data-title="微信">
              <i class="fa fa-weixin"></i>
            </a>
          </li>
          <li>
            <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=http://makeafree.github.io/2020/05/30/Android TV  Mstar平台 I2C 配置/&title=枫林晚秋&source=" data-title="QQ">
              <i class="fa fa-qq"></i>
            </a>
          </li>
          <li>
            <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=http://makeafree.github.io/2020/05/30/Android TV  Mstar平台 I2C 配置/" data-title="Facebook">
              <i class="fa fa-facebook"></i>
            </a>
          </li>
          <li>
            <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=枫林晚秋&url=http://makeafree.github.io/2020/05/30/Android TV  Mstar平台 I2C 配置/&via=http://makeafree.github.io" data-title="Twitter">
              <i class="fa fa-twitter"></i>
            </a>
          </li>
          <li>
            <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=http://makeafree.github.io/2020/05/30/Android TV  Mstar平台 I2C 配置/" data-title="Google+">
              <i class="fa fa-google-plus"></i>
            </a>
          </li>
        </ul>
     </div>
</div>
<div class="post-modal wx-share" id="wxShare">
    <a class="close" href="javascript:;" id="wxShare-close">×</a>
    <p>扫一扫，分享到微信</p>
    <img src="//api.qrserver.com/v1/create-qr-code/?data=http://makeafree.github.io/2020/05/30/Android TV  Mstar平台 I2C 配置/" alt="微信分享二维码">
</div>

<div class="mask"></div>

        
        <ul class="article-footer-menu">
            
            
        </ul>
        
    </footer>
  </div>
</article>


    <aside class="post-toc-pos post-toc-top" id="post-toc">
        <nav class="post-toc-wrap">
            <ol class="post-toc"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Android-TV-Mstar平台-I2C-配置"><span class="post-toc-text">Android TV : Mstar平台 I2C 配置</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#1、标准GPIO口配置"><span class="post-toc-text">1、标准GPIO口配置</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#2、特殊口配置"><span class="post-toc-text">2、特殊口配置</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#3、使用实例-移植TCA9539"><span class="post-toc-text">3、使用实例 - 移植TCA9539</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#null"><span class="post-toc-text">　</span></a></li></ol>
        </nav>
    </aside>
    

<nav id="article-nav">
  
    <a href="/2020/05/30/Android TV  Mstar平台 GPIO 调试/" id="article-nav-newer" class="article-nav-link-wrap">

      <span class="article-nav-title">
        <i class="fa fa-hand-o-left" aria-hidden="true"></i>
        
          (no title)
        
      </span>
    </a>
  
  
    <a href="/2020/03/30/【程序人生】程序员接私活常用平台汇总/" id="article-nav-older" class="article-nav-link-wrap">
      <span class="article-nav-title">【程序人生】程序员接私活常用平台汇总</span>
      <i class="fa fa-hand-o-right" aria-hidden="true"></i>
    </a>
  
</nav>



    
</section>
        
      </div>
      <footer id="footer">
  <div class="outer">
    <div id="footer-info" class="inner">
      
<p>
    <span id="busuanzi_container_site_uv" style='display:none'>
        总访客数：<span id="busuanzi_value_site_uv"></span>
    </span>
    <span id="busuanzi_container_site_pv" style='display:none'>
        总访问量：<span id="busuanzi_value_site_pv"></span>
    </span>
</p>


      <p>
        Powered by  <a href="http://hexo.io/" target="_blank">Hexo</a>
        Theme <a href="//github.com/wongminho/hexo-theme-miho" target="_blank">MiHo</a>
      &copy; 2020 cuijunlei<br>
      </p>
    </div>
  </div>
</footer>
    <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
<script src="//cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script>
<script>
  var mihoConfig = {
      root: "http://makeafree.github.io",
      animate: true,
      isHome: false,
      share: true,
      reward: 1
  }
</script>
<div class="sidebar">
    <div id="sidebar-search" title="Search">
        <i class="fa fa-search"></i>
    </div>
    <div id="sidebar-category" title="Categories">
        <i class="fa fa-book"></i>
    </div>
    <div id="sidebar-tag" title="Tags">
        <i class="fa fa-tags"></i>
    </div>
    <div id="sidebar-top">
        <span class="sidebar-top-icon"><i class="fa fa-angle-up"></i></span>
    </div>
</div>
<div class="sidebar-menu-box" id="sidebar-menu-box">
    <div class="sidebar-menu-box-container">
        <div id="sidebar-menu-box-categories">
            <a class="category-link" href="/categories/Linux/">Linux</a><a class="category-link" href="/categories/python/">python</a><a class="category-link" href="/categories/程序人生/">程序人生</a>
        </div>
        <div id="sidebar-menu-box-tags">
            <a href="/tags/python文件/" style="font-size: 20px;">python文件</a> <a href="/tags/常识知识/" style="font-size: 10px;">常识知识</a>
        </div>
    </div>
    <a href="javascript:;" class="sidebar-menu-box-close">&times;</a>
</div>
<div class="mobile-header-menu-nav" id="mobile-header-menu-nav">
    <div class="mobile-header-menu-container">
        <span class="title">Menus</span>
        <ul class="mobile-header-menu-navbar">
            
            <li>
                <a  href="/">
                    <i class="fa fa-home"></i><span>Home</span>
                </a>
            </li>
            
            <li>
                <a  href="/archives">
                    <i class="fa fa-archive"></i><span>Archives</span>
                </a>
            </li>
            
            <li>
                <a  href="/about">
                    <i class="fa fa-user"></i><span>About</span>
                </a>
            </li>
            
        </ul>
    </div>
    <div class="mobile-header-tag-container">
        <span class="title">Tags</span>
        <div id="mobile-header-container-tags">
            <a href="/tags/python文件/" style="font-size: 20px;">python文件</a> <a href="/tags/常识知识/" style="font-size: 10px;">常识知识</a>
        </div>
    </div>
</div>
<div class="search-wrap">
    <span class="search-close">&times;</span>
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="back">
            <i class="icon icon-lg icon-chevron-left"></i>
        </a>
        <input class="search-field" placeholder="Search..." id="keywords">
        <a id="search-submit" href="javascript:;">
            <i class="fa fa-search"></i>
        </a>
    <div class="search-container" id="search-container">
        <ul class="search-result" id="search-result">
        </ul>
    </div>
</div>

<div id="search-tpl">
    <li class="search-result-item">
        <a href="{url}" class="search-item-li">
            <span class="search-item-li-title" title="{title}">{title}</span>
        </a>
    </li>
</div>
<script src="/js/search.js"></script>
<script src="/js/main.js"></script>


  <script src="//cdn.bootcss.com/particles.js/2.0.0/particles.min.js"></script>
  <div id="particles"></div>
  <script src="/js/particles.js"></script>







  <link rel="stylesheet" href="//cdn.bootcss.com/animate.css/3.5.0/animate.min.css">
  <script src="//cdn.bootcss.com/scrollReveal.js/3.0.5/scrollreveal.js"></script>
  <script src="/js/animate.js"></script>


  <script src="/js/pop-img.js"></script>
  <script>
     $(".article-entry p img").popImg();
  </script>

  </div>
</body>
</html>